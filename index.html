<html>      
  <head>
    <script src="https://aframe.io/releases/1.0.3/aframe.min.js"></script>
    <script src="afp.js"></script>
    <script src="aec.js"></script>
    <script src="aecs.js"></script>
  </head>
  <body>
    <a-scene id="testScene" physics>
      <a-assets>
        <a-mixin id="cube" geometry="primitive: box; width: 0.33; height: 0.33; depth: 0.33"
                 hoverable grabbable stretchable draggable
                 event-set__hoveron="_event: hover-start; material.opacity: 0.7; transparent: true"
                 event-set__hoveroff="_event: hover-end; material.opacity: 1; transparent: false"
                 dynamic-body shadow></a-mixin>
        <a-mixin id="touch"
                 physics-collider phase-shift
                 collision-filter="collisionForces: true"
                 static-body="shape: sphere; sphereRadius: 0.02"
                 super-hands="colliderEvent: collisions;
                              colliderEventProperty: els;
                              colliderEndEvent: collisions;
                              colliderEndEventProperty: clearedEls;"></a-mixin>
      </a-assets>
      <a-sky color="#043bae"></a-sky>
      <a-entity id="player"
        camera="userHeight: 1.6"
        wasd-controls
        look-controls
        shoot="direction: 0 0 -1; spaceKeyEnabled: true">
      </a-entity>
      <a-entity id="rhand" mixin="touch"
                  vive-controls="hand: right"
                  oculus-touch-controls="hand: right"
                  windows-motion-controls="hand: right">
      </a-entity>
      <a-entity id="blockHand" mixin="touch" hand-controls="left" laser-controls="" controller-cursor="" intersection-spawn="event: click" daydream-controls="" gearvr-controls=""oculus-touch-controls="" vive-controls="" windows-motion-controls="" physics-collider="true" phase-shift="" collision-filter="true" velocity="" static-body="" super-hands="" position=""></a-entity>
      <a-entity id="ground" type="background" static-body
                 geometry="primitive: cylinder; radius: 20000; height: 0.1" 
                 position="0 0 0" 
                 material="shader: flat; color: #424949">
    </a-scene>
    <script>
      document.querySelector('#blockHand').addEventListener(`click`, function (evt) {
        var sceneEl = document.querySelector('a-scene'); // get the scene
        var entityEl = document.createElement('a-entity'); // get a new entity
        // set our params
        entityEl.setAttribute('mixin', 'cube'); // make it a cube
        entityEl.setAttribute('position', {x: evt.detail.intersection.point["x"], y: evt.detail.intersection.point["y"]+0.165, z: evt.detail.intersection.point["z"]}); // add some to the height so it won't glitch dafuq out
        sceneEl.appendChild(entityEl); // put it in the scene
      });
      </script>
  </body>
</html>
